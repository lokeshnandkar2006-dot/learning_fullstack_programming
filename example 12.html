<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>To-Do List App</title>
    <style>
      /* Global reset and box-sizing */
      * {
        margin: 0;
        padding: 0;
        box-sizing: border-box;
      }

      /* Body styling with gradient background */
      body {
        font-family: "Segoe UI", Tahoma, Geneva, Verdana, sans-serif;
        background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
        min-height: 100vh;
        padding: 20px;
        display: flex;
        justify-content: center;
        align-items: center;
      }

      /* Main container */
      .container {
        background: white;
        padding: 30px;
        border-radius: 20px;
        box-shadow: 0 20px 60px rgba(0, 0, 0, 0.3);
        width: 100%;
        max-width: 600px;
      }

      /* Header styling */
      h1 {
        color: #333;
        margin-bottom: 10px;
        text-align: center;
      }

      .subtitle {
        text-align: center;
        color: #666;
        margin-bottom: 30px;
        font-size: 0.9rem;
      }

      /* Input section - flexbox for input and button */
      .input-section {
        display: flex;
        gap: 10px;
        margin-bottom: 30px;
      }

      /* Text input styling */
      #todoInput {
        flex: 1; /* Takes remaining space */
        padding: 15px;
        border: 2px solid #e0e0e0;
        border-radius: 10px;
        font-size: 1rem;
        transition: border-color 0.3s;
      }

      /* Focus state for input - highlights when user clicks */
      #todoInput:focus {
        outline: none;
        border-color: #667eea;
      }

      /* Add button styling */
      .btn-add {
        padding: 15px 30px;
        background: #667eea;
        color: white;
        border: none;
        border-radius: 10px;
        font-size: 1rem;
        font-weight: bold;
        cursor: pointer;
        transition: all 0.3s;
      }

      .btn-add:hover {
        background: #5568d3;
        transform: translateY(-2px);
        box-shadow: 0 5px 15px rgba(102, 126, 234, 0.4);
      }

      /* Filter buttons section */
      .filter-buttons {
        display: flex;
        gap: 10px;
        margin-bottom: 20px;
        justify-content: center;
      }

      .btn-filter {
        padding: 10px 20px;
        border: 2px solid #667eea;
        background: white;
        color: #667eea;
        border-radius: 8px;
        cursor: pointer;
        transition: all 0.3s;
        font-weight: 600;
      }

      /* Active filter button styling */
      .btn-filter.active {
        background: #667eea;
        color: white;
      }

      .btn-filter:hover {
        transform: translateY(-2px);
      }

      /* Todo list container - where tasks appear */
      .todo-list {
        list-style: none; /* Remove default bullet points */
      }

      /* Individual todo item styling */
      .todo-item {
        display: flex;
        align-items: center;
        padding: 15px;
        margin-bottom: 10px;
        background: #f8f9fa;
        border-radius: 10px;
        transition: all 0.3s;
        animation: slideIn 0.3s ease;
      }

      /* Slide-in animation for new todos */
      @keyframes slideIn {
        from {
          opacity: 0;
          transform: translateX(-20px);
        }
        to {
          opacity: 1;
          transform: translateX(0);
        }
      }

      /* Hover effect on todo items */
      .todo-item:hover {
        background: #e9ecef;
        transform: translateX(5px);
      }

      /* Checkbox styling */
      .todo-checkbox {
        width: 20px;
        height: 20px;
        margin-right: 15px;
        cursor: pointer;
      }

      /* Todo text content */
      .todo-text {
        flex: 1; /* Takes remaining space */
        font-size: 1rem;
        color: #333;
        word-break: break-word; /* Wraps long words */
      }

      /* Completed todo styling - strikethrough and gray */
      .todo-item.completed .todo-text {
        text-decoration: line-through;
        color: #999;
      }

      /* Delete button styling */
      .btn-delete {
        background: #e74c3c;
        color: white;
        border: none;
        padding: 8px 15px;
        border-radius: 6px;
        cursor: pointer;
        transition: all 0.3s;
        font-weight: bold;
      }

      .btn-delete:hover {
        background: #c0392b;
        transform: scale(1.1);
      }

      /* Statistics bar at bottom */
      .stats-bar {
        display: flex;
        justify-content: space-between;
        margin-top: 20px;
        padding: 15px;
        background: #f0f0f0;
        border-radius: 10px;
        font-size: 0.9rem;
        color: #666;
      }

      /* Clear all button */
      .btn-clear-all {
        width: 100%;
        margin-top: 15px;
        padding: 12px;
        background: #95a5a6;
        color: white;
        border: none;
        border-radius: 8px;
        cursor: pointer;
        font-weight: bold;
        transition: all 0.3s;
      }

      .btn-clear-all:hover {
        background: #7f8c8d;
      }

      /* Empty state message */
      .empty-state {
        text-align: center;
        padding: 40px;
        color: #999;
        font-size: 1.1rem;
      }
    </style>
  </head>
  <body>
    <!-- Main container -->
    <div class="container">
      <h1>üìù To-Do List</h1>
      <p class="subtitle">Your tasks are saved automatically</p>

      <!-- Input section for adding new todos -->
      <div class="input-section">
        <input
          type="text"
          id="todoInput"
          placeholder="What needs to be done?"
          autocomplete="off"
        />
        <button class="btn-add" id="addBtn">Add Task</button>
      </div>

      <!-- Filter buttons -->
      <div class="filter-buttons">
        <button class="btn-filter active" data-filter="all">All</button>
        <button class="btn-filter" data-filter="active">Active</button>
        <button class="btn-filter" data-filter="completed">Completed</button>
      </div>

      <!-- Todo list container -->
      <ul class="todo-list" id="todoList"></ul>

      <!-- Statistics bar -->
      <div class="stats-bar">
        <span id="totalTasks">Total: 0</span>
        <span id="activeTasks">Active: 0</span>
        <span id="completedTasks">Completed: 0</span>
      </div>

      <!-- Clear all button -->
      <button class="btn-clear-all" id="clearAllBtn">Clear All Tasks</button>
    </div>

    <script>
      // ========================================
      // DOM ELEMENT REFERENCES
      // ========================================

      const todoInput = document.getElementById("todoInput");
      const addBtn = document.getElementById("addBtn");
      const todoList = document.getElementById("todoList");
      const clearAllBtn = document.getElementById("clearAllBtn");
      const filterButtons = document.querySelectorAll(".btn-filter");
      const totalTasksSpan = document.getElementById("totalTasks");
      const activeTasksSpan = document.getElementById("activeTasks");
      const completedTasksSpan = document.getElementById("completedTasks");

      // ========================================
      // STATE VARIABLES
      // ========================================

      // Array to store all todo items
      // Each todo is an object: { id, text, completed }
      let todos = [];

      // Current filter state: 'all', 'active', or 'completed'
      let currentFilter = "all";

      // ========================================
      // LOCALSTORAGE FUNCTIONS
      // ========================================

      /**
       * Loads todos from localStorage
       * Parses JSON string back into array of objects
       */
      function loadTodos() {
        // Get the JSON string from localStorage
        const savedTodos = localStorage.getItem("todos");

        // If todos exist, parse them from JSON string to JavaScript array
        // JSON.parse() converts: '["item1","item2"]' ‚Üí ["item1","item2"]
        if (savedTodos) {
          todos = JSON.parse(savedTodos);
        }
      }

      /**
       * Saves todos to localStorage
       * Converts array to JSON string for storage
       */
      function saveTodos() {
        // JSON.stringify() converts JavaScript object to JSON string
        // Example: [{id:1, text:"Buy milk"}] ‚Üí '[{"id":1,"text":"Buy milk"}]'
        localStorage.setItem("todos", JSON.stringify(todos));
      }

      // ========================================
      // TODO OPERATIONS
      // ========================================

      /**
       * Adds a new todo to the list
       * @param {string} text - The todo text content
       */
      function addTodo(text) {
        // Validate input - trim() removes whitespace from both ends
        if (text.trim() === "") {
          alert("Please enter a task!");
          return;
        }

        // Create new todo object
        const todo = {
          id: Date.now(), // Unique ID using timestamp
          text: text.trim(),
          completed: false,
        };

        // Add to beginning of array (newest first)
        todos.unshift(todo);

        // Save to localStorage and update UI
        saveTodos();
        renderTodos();

        // Clear input field after adding
        todoInput.value = "";
      }

      /**
       * Toggles the completed status of a todo
       * @param {number} id - The unique ID of the todo
       */
      function toggleTodo(id) {
        // find() searches array and returns first matching item
        const todo = todos.find((t) => t.id === id);

        if (todo) {
          // Toggle completed status (true ‚Üî false)
          todo.completed = !todo.completed;
          saveTodos();
          renderTodos();
        }
      }

      /**
       * Deletes a todo from the list
       * @param {number} id - The unique ID of the todo to delete
       */
      function deleteTodo(id) {
        // filter() creates new array excluding the todo with matching id
        // Example: [1,2,3,4].filter(x => x !== 3) ‚Üí [1,2,4]
        todos = todos.filter((t) => t.id !== id);
        saveTodos();
        renderTodos();
      }

      /**
       * Clears all todos from the list
       */
      function clearAllTodos() {
        if (todos.length === 0) return;

        // Confirm before clearing
        if (confirm("Are you sure you want to delete all tasks?")) {
          todos = [];
          saveTodos();
          renderTodos();
        }
      }

      // ========================================
      // RENDERING FUNCTIONS
      // ========================================

      /**
       * Renders the todo list based on current filter
       * This function rebuilds the entire list in the DOM
       */
      function renderTodos() {
        // Clear existing list
        todoList.innerHTML = "";

        // Filter todos based on current filter setting
        let filteredTodos = todos;
        if (currentFilter === "active") {
          filteredTodos = todos.filter((t) => !t.completed);
        } else if (currentFilter === "completed") {
          filteredTodos = todos.filter((t) => t.completed);
        }

        // Show empty state if no todos
        if (filteredTodos.length === 0) {
          todoList.innerHTML =
            '<div class="empty-state">No tasks to show</div>';
          updateStats();
          return;
        }

        // Loop through filtered todos and create DOM elements
        filteredTodos.forEach((todo) => {
          // Create list item element
          const li = document.createElement("li");
          li.className = "todo-item";

          // Add completed class if todo is done
          if (todo.completed) {
            li.classList.add("completed");
          }

          // Build HTML structure for todo item
          li.innerHTML = `
                    <input 
                        type="checkbox" 
                        class="todo-checkbox" 
                        ${todo.completed ? "checked" : ""}
                        data-id="${todo.id}">
                    <span class="todo-text">${todo.text}</span>
                    <button class="btn-delete" data-id="${
                      todo.id
                    }">Delete</button>
                `;

          // Append to todo list
          todoList.appendChild(li);
        });

        // Update statistics display
        updateStats();
      }

      /**
       * Updates the statistics display
       * Shows total, active, and completed task counts
       */
      function updateStats() {
        const total = todos.length;
        const active = todos.filter((t) => !t.completed).length;
        const completed = todos.filter((t) => t.completed).length;

        totalTasksSpan.textContent = `Total: ${total}`;
        activeTasksSpan.textContent = `Active: ${active}`;
        completedTasksSpan.textContent = `Completed: ${completed}`;
      }

      /**
       * Sets the current filter and updates button states
       * @param {string} filter - The filter to apply ('all', 'active', 'completed')
       */
      function setFilter(filter) {
        currentFilter = filter;

        // Update active state on filter buttons
        filterButtons.forEach((btn) => {
          if (btn.dataset.filter === filter) {
            btn.classList.add("active");
          } else {
            btn.classList.remove("active");
          }
        });

        renderTodos();
      }

      // ========================================
      // EVENT LISTENERS
      // ========================================

      // Add todo when button is clicked
      addBtn.addEventListener("click", () => {
        addTodo(todoInput.value);
      });

      // Add todo when Enter key is pressed in input
      todoInput.addEventListener("keypress", (e) => {
        // e.key gives the key name, 'Enter' for Enter key
        if (e.key === "Enter") {
          addTodo(todoInput.value);
        }
      });

      // Event delegation for checkboxes and delete buttons
      // This handles clicks on dynamically created elements
      todoList.addEventListener("click", (e) => {
        // Check if clicked element is a checkbox
        if (e.target.classList.contains("todo-checkbox")) {
          // dataset.id accesses the data-id attribute
          const id = parseInt(e.target.dataset.id);
          toggleTodo(id);
        }

        // Check if clicked element is a delete button
        if (e.target.classList.contains("btn-delete")) {
          const id = parseInt(e.target.dataset.id);
          deleteTodo(id);
        }
      });

      // Filter button clicks
      filterButtons.forEach((btn) => {
        btn.addEventListener("click", () => {
          setFilter(btn.dataset.filter);
        });
      });

      // Clear all button
      clearAllBtn.addEventListener("click", clearAllTodos);

      // ========================================
      // INITIALIZATION
      // ========================================

      // Load todos from localStorage and render on page load
      loadTodos();
      renderTodos();
    </script>
  </body>
</html>

